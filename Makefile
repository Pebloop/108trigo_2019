.PHONY = debug retest re

SRC =   src/trigo.c

MAIN =  main.c

OBJ =   $(SRC:.c=.o)

MAIN_OBJ =  $(MAIN:.c=.o)


CFLAGS = -Iinclude/ \

NAME =  108trigo

TEST =  108trigo.t

DEBUG = 108trigo.d

all: $(NAME)

make_lib:
	@echo ' ___  ___  ___                         _  _        _  _  _         ___  ___  ___'
	@echo '|___||___||___|  ___  ___  _ _ _  ___ <_>| | ___  | |<_>| |_  ___ |___||___||___|'
	@echo ' ___  ___  ___  / |  / . \|     || . \| || |/ ._> | || || . \<_-<  ___  ___  ___'
	@echo '|___||___||___| \_|_.\___/|_|_|_||  _/|_||_|\___. |_||_||___//__/ |___||___||___|'
	@echo '                                 |_|'

$(NAME): make_lib $(OBJ) $(MAIN_OBJ)
	@echo ' ___  ___  ___                         _  _                                              ___  ___  ___'
	@echo '|___||___||___|  ___  ___  _ _ _  ___ <_>| | ___   ___  _ _  ___  ___  _ _  ___  _ _ _  |___||___||___|'
	@echo ' ___  ___  ___  / |  / . \|     || . \| || |/ ._> | . \|  _>/ . \/ . ||  _><_> ||     |  ___  ___  ___'
	@echo '|___||___||___| \_|_.\___/|_|_|_||  _/|_||_|\___. |  _/|_|  \___/\_. ||_|  <___||_|_|_| |___||___||___|'
	@echo '                                 |_|              |_|            <___|'
	gcc -o $(NAME) $(MAIN_OBJ) $(OBJ) $(CFLAGS)

debug: make_lib $(OBJ) $(MAIN_OBJ)
	gcc -g3 -o $(DEBUG) $(MAIN_OBJ) $(OBJ) $(CFLAGS)

tests_run: make_lib
	gcc -o $(TEST) $(OBJ) $(CFLAGS)
	./$(TEST)

retest: fclean tests_run

clean:
	@echo ' ___  ___  ___        _                  ___  ___  ___'
	@echo '|___||___||___|  ___ | | ___  ___  _ _  |___||___||___|'
	@echo ' ___  ___  ___  / |  | |/ ._><_> ||   |  ___  ___  ___'
	@echo '|___||___||___| \_|_.|_|\___.<___||_|_| |___||___||___|'
	rm -f $(OBJ) $(MAIN_OBJ)

fclean: clean
	@echo ' ___  ___  ___   ___      _                  ___  ___  ___'
	@echo '|___||___||___| | |  ___ | | ___  ___  _ _  |___||___||___|'
	@echo ' ___  ___  ___  | |-/ |  | |/ ._><_> ||   |  ___  ___  ___'
	@echo '|___||___||___| |_| \_|_.|_|\___.<___||_|_| |___||___||___|'
	rm -f $(TEST) $(NAME)

re: fclean all
